#!/usr/bin/env bash
set -euo pipefail
exec > >(tee log/docs.log) 2>&1

# Generate documentation using cargo doc
# Doxidize appears to be broken/unconfigured, so we'll use cargo doc directly

echo "ğŸ“š Generating documentation with cargo doc..."

# Generate documentation
cargo doc --all-features --no-deps

# Check if documentation was generated
if [ -d "target/doc" ] && [ -f "target/doc/streamweave/index.html" ]; then
    echo "âœ… Documentation generated successfully"
    echo "ğŸ“– Documentation available at: target/doc/streamweave/index.html"
else
    echo "âŒ Documentation generation failed"
    exit 1
fi

