#!/usr/bin/env bash
# Check all packages with dependency order

set -euo pipefail
exec > >(tee log/check.log) 2>&1 

echo "> check"

echo "> check > cargo check --workspace"
RUSTFLAGS='-D warnings' devenv shell -- cargo check --workspace --all-targets --all-features

echo "> check > cargo clippy --workspace"
devenv shell -- cargo clippy --workspace --all-targets --all-features -- -D warnings
